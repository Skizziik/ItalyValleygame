Роль и цель

Ты — ведущий гейм-директор + технический директор + системный дизайнер + Godot-инженер. Твоя задача: сделать полноценную пиксельную игру в стиле “Stardew Valley”, но не клон — со своим миром, историей и системами.
Работаем в репозитории: https://github.com/Skizziik/ItalyValleygame
Требование: коммиты очень часто (маленькими порциями), аккуратные сообщения коммитов, понятные PR/ветки (или прямые коммиты в main — если так проще).

1) Видение игры (high concept)

Название (рабочее): Italy Valley
Жанр: cozy life-sim + ферма + ремесло + социальные связи + легкая боевка/данжи
Визуал: теплый “ламповый” пиксель-арт, мягкая палитра, много деталей, итальянская эстетика.
Сеттинг: маленькая итальянская деревня (условно Тоскана/Лигурия), рядом: море, виноградники, оливковые рощи, горы, древние руины.
Главная “фишка”: жизнь в Италии — рынки, кофе-бар, пьяцца, фестивали, местные ремесла, кухня, виноделие, оливковое масло, скутеры, рыбалка, маленькие семейные магазины.

2) Игровой цикл (core loop)

Игрок:

Просыпается → проверяет погоду/письма/квесты

Ухаживает за домом/садом/виноградником/огородом

Собирает ресурсы (лес/камень/травы/рыба/ракушки)

Крафтит (инструменты/мебель/еда/ремесленные товары)

Идет в деревню: рынок, продажи, общение, квесты

Исследует: побережье, рощи, руины/катакомбы (легкий combat)

Вечером: готовка, декор дома, отношения, события, сон
→ Прогресс: деньги (евро), репутация, навыки, улучшения дома/фермы/инструментов, открытие новых зон, сюжет.
в целом, чтобы был опенворлд и заниматся можно было цем угодно

4) Механики — подробно (полное ТЗ)
4.1 Управление и UX

WASD/стрелки: движение

Мышь/клавиши: взаимодействие (E), атака/использование инструмента (ЛКМ), инвентарь (I), журнал (J), карта (M), квесты (Q), крафт (C), пауза (Esc)

Подсказки: контекстные тултипы при наведении/подходе

“Cozy” UX: мягкие звуки кликов, плавные анимации UI

4.2 Время, календарь, сезоны, погода

День делится на часы (например 6:00–2:00)

Календарь: 4 сезона, каждый по 28 дней

Погода: ясно/пасмурно/дождь/шторм у моря (влияет на рыбалку, NPC, события)

Сезонные фестивали: минимум 1 фестиваль на сезон (позже расширить)

4.3 Энергия/стамина и здоровье

Действия тратят энергию: рубка, копка, полив, бой

Если энергия 0: игрок медленнее/не может выполнять тяжелые действия

Сон восстанавливает энергию; еда восстанавливает часть энергии

В данже: здоровье, урон от врагов, хилки/еда

4.4 Инвентарь (обязательно подробно)

Сделай инвентарь как сетка + хотбар:

Слоты: 24–36 (например 6x6)

Хотбар: 10 слотов (цифры 1–0)

Стэкинг предметов (например 999 для ресурсов, меньше для еды/инструментов)

Drag&Drop между слотами, разделение стака (Shift/ПКМ)

Сортировка: по типу/цене/алфавиту

Категории: ресурсы, материалы, еда, инструменты, квестовые, мебель, рыба, семена, минералы

Подсказки предмета: название, тип, описание, цена, качество (обычное/хорошее/отличное), эффекты

“Курсор-предмет”: если предмет в руке — подсветка, куда можно поставить/использовать

4.5 Хранилище: сундуки, склад, холодильник

Сундуки разных типов:

Деревянный сундук (базовый)

Большой сундук (больше слотов)

Холодильник (еда/ингредиенты)

Склад (позже — “амбар”)

Быстрое перемещение: “все ресурсы в сундук”, “все ингредиенты в холодильник”

Фильтры и поиск внутри сундука

4.6 Крафтинг и верстаки (очень детально)

Система рецептов:

Рецепт = набор ингредиентов + станок (или без станка) + время (опционально)

UI крафта: список рецептов, поиск, фильтр по типу, предпросмотр результата

“Открытие рецептов”: через квесты, прокачку навыка, покупку у NPC, находки в руинах

Верстаки/станки (минимум перечислить в план, часть в MVP):

Верстак (общий)

Кухонная плита/печь (готовка)

Стол плотника (мебель, дерево)

Кузница (металл, апгрейды инструментов)

Ткацкий станок (ткань)

Пресс для оливкового масла (уникальная итальянская фича)

Винодельня / бочки для вина (уникальная фича)

Сушилка для трав/рыбы

Пчелиный улей (мед)

Компостер (удобрения)

Стол алхимика/травника (настойки)

4.7 Фермерство: почва, посадка, рост, сбор

Почва: обычная земля/вспаханная/политая

Семена: сезонные; рост в стадиях (спрайты стадий)

Полив: лейка, дождь

Удобрения: ускорение роста/качество

Болезни/сорняки (позже, не в MVP)

Урожай: качество (обычное/серебро/золото) влияет на цену

Культуры (примерный список для Италии, расширяемый):

Помидоры, базилик, чеснок, лук, баклажан, кабачок, перец

Виноград (важно)

Оливки (важно)

Лимоны (в прибрежной зоне)

Пшеница (мука)

Травы: розмарин, орегано, тимьян

4.8 Животные 

Курицы, козы, овцы (сыр/шерсть)

Пчёлы (мёд)

Система ухода: корм, вода, настроение, продукция, болезни

4.9 Рыбалка (как хобби + экономика)

Мини-игра: индикатор + удержание зоны/тайминг (простая, но приятная)

Виды рыбы: морская/речная/озерная

Редкость и сезонность

Лут на берегу: ракушки, стекло, “сообщение в бутылке” (лоры/рецепты)

Приманки и улучшения удочки за евро

4.10 Добыча и руины (данжи + ресурсы)

Вход в руины/катакомбы рядом с древними развалинами

Комнаты/уровни: процедурно или фиксировано (в MVP — фиксировано проще)

Ресурсы: руда (медь/железо), древние монеты, артефакты

Враги: 3 типа (например: летучие мыши, каменные големчики, “призраки руин”)

Мини-босс: “Страж руин” (телеграфируемые атаки, 2 фазы)
4.11 Бой (легкий, cozy-friendly)

Оружие: палка/кинжал/меч (позже)

Уклонение/рывок (optional), простые hitboxes

Выпадение лута

“Не хардкор”: меньше наказания, можно уйти

4.12 Социальная система: NPC, дружба, расписания

NPC должны:

Иметь имя, роль, характер, предпочтения подарков, расписание дня, дом/места

Диалоги: базовые, погодные, сезонные, при росте дружбы

Система дружбы (0–10 сердец), подарки 1/день, любимые/нелюбимые предметы

События отношений (heart events): короткие кат-сцены (в MVP 1–2 события)

Примеры NPC (можно свои, но держи итальянскую атмосферу):

Бариста в кафе на пьяцце

Рыбак у порта

Владелица рынка/лавки

Травница/алхимик

Мэр/мэрия

Археолог (с руинами связан)
музыкант, мастер-ремесленник, художница и другие

4.13 Квесты и сюжет

Нужно:

Главная сюжетная линия: почему герой приехал, что происходит с деревней, тайна руин

Побочные квесты: доставка, сбор, ремонт, знакомство, события фестиваля

“Доска объявлений” на площади: ежедневные/еженедельные задания

4.14 Экономика и деньги (евро)

Валюта: € Euro (в UI использовать “€”).

Игрок получает деньги через: продажу урожая, рыбы, крафтовых товаров, выполнение заказов, работу (см. ниже)

Цены зависят от качества/редкости

Магазины: семена, инструменты, кухня, мебель, рыбацкие снасти

Рынок: “дни рынка” (например каждую субботу) с повышенным спросом на определенные товары

Налог/аренда (опционально, позже; не делать душным)

4.15 Работы / подработки (важно — ты просил)

Добавь систему “работ” как мини-активности:

Бариста-смена в кафе: мини-игра “собери заказ” (эспрессо/капучино/корнетто)

Помощь рыбаку: разгрузка сетей (тайминг)

Почта/доставка: развоз писем по деревне

Сбор оливок на сезон: быстрый сбор + сортировка

Виноградный сбор (vendemmia): сезонный ивент + бонусы

Работа дает:

фиксированную оплату в евро

репутацию у конкретного NPC/фракции

иногда — уникальные рецепты/предметы

4.16 Кулинария

Рецепты итальянской кухни: паста, соусы, панини, минестроне, тирамису (позже), фокачча

Ингредиенты из фермы/магазина/рыбалки

Эффекты еды: энергия, баффы (скорость, удача, рыбалка)

4.17 Декор и уют (cozy)

Мебель: столы, стулья, лампы, ковры, картины, растения в горшках

Кастомизация дома: расширение комнат, покраска стен (позже)

Небольшие атмосферные интеракции: сидеть на скамейке на площади, слушать музыку вечером

4.18 Достижения (ачивки)

Система ачивок:

10 в MVP, затем расширять
Примеры:

“Первый урожай”

“Первый улов”

“Первый крафт”

“Друг деревни” (5 сердец с NPC)

“Секрет руин” (победа над мини-боссом)

“Итальянский завтрак” (сделать эспрессо + корнетто)

4.19 Коллекции и музеи (очень Stardew-like, но по-итальянски)

Коллекции: рыба, артефакты, травы

Музей/археологический уголок: сдаешь артефакты → награды/лоры


5) Контент: предметы (категории и примеры)

Сразу заложи data-driven предметы: JSON/TSV/CSV или Godot Resource (.tres/.res) — чтобы легко добавлять.

Категории предметов

Материалы: дерево, камень, руда, уголь, ткань, кожа и другие пожалуйста (это не полный список придумай еще )

Инструменты: топор, кирка, лейка, удочка, мотыга  и другие пожалуйста (это не полный список придумай еще )

Семена: помидор, базилик, виноград, оливки, лимон  и другие пожалуйста (это не полный список придумай еще )

Урожай: помидоры, виноград, оливки, травы  и другие пожалуйста (это не полный список придумай еще )

Рыба/морские: сардины, анчоусы, дорадо, кальмар (позже), ракушки  и другие пожалуйста (это не полный список придумай еще )

Крафтовые товары: оливковое масло, вино, сушеные травы, сыр  и другие пожалуйста (это не полный список придумай еще )

Еда: паста, суп, панини, кофе  и другие пожалуйста (это не полный список придумай еще )

Мебель/декор  и другие пожалуйста (это не полный список придумай еще )

Квестовые
 
Артефакты: древняя монета, фрагмент мозаики, амфора  и другие пожалуйста (это не полный список придумай еще )

Для каждого предмета:

id, name, description, category, stack_max, base_price, rarity, season, quality_rules, icon_path, sprite_path (если нужен), tags (например “ingredient”, “gift_loved_by:Marco”)



6) Техническая архитектура (обязательные требования)
6.1 Data-driven дизайн

Предметы, рецепты, NPC-расписания, диалоги, квесты — в данных, а не хардкод.

Удобные таблицы/JSON + валидатор при запуске.

6.2 Системы/менеджеры

Сцены и менеджеры:

GameManager (состояние игры)

TimeManager (время/день/сезон/погода)

SaveManager (save slots + автосейв)

InventoryManager (инвентарь/сундуки)

CraftingManager (рецепты)

EconomyManager (цены/продажи)

QuestManager (квесты)

DialogueManager (диалоги + выбор реплик)

NPCManager (спавн/расписания/переходы)

AudioManager (музыка/ambient/эффекты)

SceneLoader (переходы между локациями с fade)

6.3 Сохранения

JSON save (или бинарный ресурс) + версия сейва

Сохранять: позицию, время, инвентарь, сундуки, деньги, отношения, квесты, состояние мира, посаженные культуры и стадии роста

6.4 UI

Инвентарь, сундуки, крафт, журнал квестов, карта, отношения, настройки, меню паузы

Поддержка мыши и клавиатуры

6.5 Производительность

TileMap оптимально

Минимизировать дорогое обновление UI

NPC pathfinding простой (A* по гриду или заранее заданные точки)

Арт-ассеты: Можешь нарисовать сам либо скачать подходящие? я не хнаю это момент, но все должно быглядь очень по единому итальяскому стилю

Техническое требование: сделай ASSETS_LICENSES.md, где:

источник каждого пакета

лицензия

атрибуция (если нужна) если скачивать будешь 

8) История и атмосфера (контент-план)
8.1. Главный сюжетный каркас

Завязка: игрок приезжает в небольшую итальянскую деревню (условно: холмы, виноградники/оливы, каменные дома) по причине наследства: старый дом родственника, который давно пустует. Деревня выглядит “на последнем дыхании”: закрытые лавки, пустая площадь, выцветшие вывески, недостроенные ремонты, один-два активных бизнеса.

Конфликт: деревня угасает не только экономически. Рядом — руины (старое поселение/монастырь/римская вилла/этрусский некрополь — выбрать один стиль), которые будто “держат” деревню в прошлом. Люди осторожны, некоторые избегают темы руин, кто-то злится на “туристов и археологов”, кто-то наоборот хочет оживления любой ценой.

Обещание игроку: через восстановление дома и ремесел, запуск рынка и маленького туризма, игрок реально меняет жизнь деревни: появляются люди на площади, открываются новые точки, NPC “оттаивают”, события становятся светлее.

Секрет руин: руины хранят тайну, связанную с судьбой родственника и переломным событием в деревне (исчезновение/пожар/обвал/скандал с раскопками). Тайна раскрывается постепенно через лор-объекты + “heart events” + прогресс восстановления.
9) GitHub-процесс (ОБЯЗАТЕЛЬНО)

Работай в репозитории ItalyValleygame:

Правила коммитов

Коммиты часто: каждые 15–45 минут или после каждой маленькой фичи/фикса

Сообщения по шаблону:

feat: add inventory grid + stacking

fix: prevent item duplication when splitting stack

chore: add asset licenses and attribution

docs: write MVP roadmap

Каждый коммит должен собираться/запускаться (или хотя бы не ломать проект)

Структура проекта (предложение)

/scenes (мир, UI, NPC, ферма)

/scripts (менеджеры, системы)

/data (items.json, recipes.json, quests.json, dialogues/)

/assets (sprites, tilesets, audio)

/docs (GDD, roadmap, licenses)

/tests (если будут unit/integration, хотя бы smoke checks)

Документация

README.md: как запустить, управление, структура

docs/GDD.md: этот дизайн-док

docs/ROADMAP.md: этапы

docs/ASSETS_LICENSES.md

создай md файл, где ты напишешь ВСЕ ЗАДАЧИ НА ЭТУ ИГРУ И ПОСТЕПЕННО закрывай все. зачеркивая и показываю что мы уже сделали 

12) Стиль исполнения (важно)

Не делай “мега-монолит” — делай маленькие, ясные классы.

Добавляй комментарии только там, где реально непонятно.

Логи/дебаг-режим: переключатель DEBUG для выводов.

Ошибки данных (невалидный JSON) должны давать понятное сообщение.

Доп. требования к диалогам (чтобы было “лампово”)

Диалоги короткие, естественные

У NPC есть “голос” (манера речи)

Мини-юмор, но без мемов

Иногда мягкие итальянские детали: “пьяцца”, “эспрессо”, “сиеста”, “рынок по субботам”

Диалоги зависят от:

времени дня

погоды

сезона

уровня дружбы

должен быть выбор игры на русском и на английском